{% extends "base.html" %}

{% block title %}
    Atrakcje
{% endblock title %}    
{% block styles %}
<style>
.atr-list{margin-bottom:10px;padding:10px;border-color:#C0C0C0;background-color: #f1f1f1 ;width:calc(100% - 15px);}
.atr-list:hover{background-color: #E8E8E8;}
.plus-icon:hover{color:#101010;}
.atr-list a{
    color:#000;
}
.atr-list .info{
    color:#7e7e7e;
}
#map{
    height:800px;
}
</style>
{% endblock styles %}
{% block content %}
<h2 style="padding:10px;text-align:center;"><span>Lista dostepnych atrakcji</span></h2>
<section class="container-fluid">
    <div class="row">
        <div class="col-5">
            {% if attraction_list %}
                {% load static %}
                <div class="listing-block">
                    {% for attraction in attraction_list %}
                    <div class="atr-list">
                        <a href="{% url 'attraction-detail' attraction.pk %}">
                            <div class="media">
                                <img class="mr-3" style="width: 128px; height: 80px"src="{% static "images/" %}{{attraction.name}}.jpeg" alt="{{attraction.name}}">
                                <div class="media-body">
                                    <div class="con" style="float:left; width:85%"><h5 class="mt-1 text-left">{{attraction.name}}</h5>
                                        <div class="info">
                                            <span><i class="fa fa-clock-o"></i> {{attraction.timeNeededToSightsee}} h</span>
                                            <span><i class="fa fa-money"></i> {{attraction.ticketCost}} z≈Ç</span>
                                        </div>
                                    </div>
                                    <div class="plus-icon-place" style="float:left">
                                        {% if user.is_authenticated %}
                                        {% if  attraction.name not in attractionNamesInCreator%}
                                            <a href="{% url 'add-attraction-to-shopping-cart' attraction.pk %}" class="icon-wrapper">
                                                    <i class="fas fa-plus-square plus-icon"></i>
                                                </a>
                                        {% else %}
                                            <a href="{% url 'add-attraction-to-shopping-cart' attraction.pk %}" class="icon-wrapper disabled">
                                                    <i class="fas fa-plus-square plus-icon"></i>
                                                </a>
                                        {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                            </div>  
                        </a>
                    </div>  
                    {% endfor %}
                    
                </div>
            {% endif %}

        </div>
        <div class="col">
            <div id="map"></div>
        </div>  
    </div>
</section>

{% endblock content %}

{% block scripts%}
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyArdvkTXE1oDlhs3VbJ4KJGYZtclFj79Hg&callback=attractionList">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.8/jquery.slimscroll.min.js"></script>
    
 
    <script>
        locs={{attractionLocalizations|safe}};
            $(function(){
            $('.listing-block').slimScroll({
                height: '800px'
            });
            $('.disabled').click((e)=>{
                e.preventDefault();
            });
        });
    </script>    
{% endblock scripts%}